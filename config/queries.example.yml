# 入札情報取得設定ファイル
# このファイルをコピーして queries.yml として使用してください
# cp config/queries.example.yml config/queries.yml

version: 1

# =============================================================================
# 取得クエリ定義
# =============================================================================
queries:
  # AI・IT関連案件
  - name: ai_it_related
    source: kkj
    params:
      # 検索キーワード（OR/AND/ANDNOT/NOT が使用可能）
      Query: "AI OR 機械学習 OR 画像検査 OR 外観検査 OR システム開発"
      # 件名で絞り込み（前後方・途中一致）
      Project_Name: ""
      # 機関名で絞り込み（前後方・途中一致）
      Organization_Name: ""
      # 都道府県コード（カンマ区切りで複数指定可、JIS X0401準拠）
      # 例: "13" = 東京都, "13,14,27" = 東京・神奈川・大阪
      LG_Code: ""
    # 取得件数上限（最大1000）
    limit: 1000
    # 有効/無効
    enabled: true
    # タグ（任意、通知や保存検索での再利用を想定）
    tags:
      - ai
      - it

  # 物品調達案件
  - name: goods_procurement
    source: kkj
    params:
      Query: "物品 OR 購入 OR 納入"
      # カテゴリで絞り込み（params内ではなく、APIパラメータとして指定）
      # Category: 1  # 1:物品, 2:工事, 3:役務
    limit: 500
    enabled: false  # 必要に応じて有効化
    tags:
      - goods

  # 特定地域の案件（例: 東京都）
  - name: tokyo_all
    source: kkj
    params:
      Query: ""
      LG_Code: "13"  # 東京都
    date_range:
      from: "2025-01-01"
      to: "2025-12-31"
    limit: 1000
    enabled: false
    tags:
      - tokyo
      - regional

# =============================================================================
# 保存検索定義
# =============================================================================
saved_searches:
  # AI案件の日次通知
  - name: ai_daily_alert
    # queries 内の name を参照
    query_ref: ai_it_related
    # ローカルフィルタ（取得後に適用）
    filters:
      keyword: ""      # 追加のキーワード絞り込み
      from: ""         # 公開日の開始
      to: ""           # 公開日の終了
      org: ""          # 機関名
    # 並び順: newest（新着順）/ deadline（締切順）
    order_by: newest
    # 実行頻度: daily / hourly
    schedule: daily
    # 差分通知（前回以降の新規のみ通知）
    only_new: true
    # 有効/無効
    enabled: true

# =============================================================================
# 通知設定
# =============================================================================
notify:
  # 通知チャネル: slack / email
  channel: slack
  # 通知先
  recipients:
    # Slack Webhook URL
    - "https://hooks.slack.com/services/YOUR/WEBHOOK/URL"
    # メールの場合はメールアドレス
    # - "user@example.com"
  # テンプレート名（default のみ対応）
  template: default
  # 1回の通知件数上限
  max_items: 100
  # 有効/無効
  enabled: false  # 実際に使用する際に true に変更

# =============================================================================
# 設定のヒント
# =============================================================================
# 
# 検索キーワードの書き方:
#   - スペース区切り: 暗黙的にAND（例: "AI 画像" → AI AND 画像）
#   - OR: 論理和（例: "AI OR 機械学習"）
#   - ANDNOT: 差集合（例: "システム ANDNOT 保守"）
#   - NOT: 否定（例: "NOT 工事"）
#   - (): 優先順位変更（例: "(AI OR ML) AND 検査"）
#
# 期間の書き方:
#   - 開始日以降: "2025-01-01/"
#   - 範囲: "2025-01-01/2025-01-31"
#   - 終了日以前: "/2025-01-31"
#   - 特定日: "2025-01-15"
#
# 都道府県コード（JIS X0401）:
#   01:北海道, 02:青森, ..., 13:東京, 14:神奈川, ..., 27:大阪, ..., 47:沖縄
#   複数指定: "13,14,27"
